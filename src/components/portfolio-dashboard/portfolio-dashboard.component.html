<div class="h-full flex flex-col gap-6 p-6 overflow-y-auto">
  <!-- Section 1: Wealth Header - Net Worth and All-Time P&L -->
  <div class="flex flex-col lg:flex-row lg:items-center gap-6 flex-shrink-0 pb-4 border-b border-gray-50">
    <!-- Left: Net Worth (Dominant) -->
    <div class="flex-shrink-0">
      <div class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-2">Net Worth</div>
      <div class="text-4xl font-mono font-bold tracking-tight text-gray-900">
        {{ netWorth() | currency:'EUR':'symbol':'1.2-2' }}
      </div>
    </div>

    <!-- Middle: All-Time P&L -->
    <div class="flex-shrink-0">
      <div class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-1">All-Time P&L</div>
      <div class="font-mono text-xl font-medium" [class]="absolutePnL() >= 0 ? 'text-emerald-600' : 'text-rose-600'">
        {{ absolutePnL() >= 0 ? '+' : '' }}{{ absolutePnL() | currency:'EUR':'symbol':'1.2-2' }}
        <span class="text-sm">({{ percentPnL() | number:'1.2-2' }}%)</span>
      </div>
    </div>
  </div>

  <!-- Section 2: Insights Carousel -->
  <div class="w-full flex-shrink-0 pb-4 border-b border-gray-50">
    <div class="flex flex-col gap-4">
      <!-- Header: Title -->
      <div class="text-xs font-bold text-gray-400 uppercase tracking-widest">Insights</div>
      
      <!-- Insight Carousel -->
      @if (portfolioInsights().length > 0) {
        <div class="relative">
          <!-- Single Insight Card with fade animation -->
          <div class="transition-opacity duration-300 ease-in-out flex justify-center">
            @if (currentInsight(); as insight) {
              <div class="max-w-md w-full">
                <app-insight-card 
                  [insight]="insight"
                  (executeAction)="handleInsightAction($event)">
                </app-insight-card>
              </div>
            }
          </div>
          
          <!-- Dot Navigation -->
          @if (portfolioInsights().length > 1) {
            <div class="flex items-center justify-center gap-2 mt-4">
              @for (insight of portfolioInsights(); track insight.message; let i = $index) {
                <button 
                  (click)="goToInsight(i)"
                  class="w-2 h-2 rounded-full transition-all duration-300"
                  [class]="currentInsightIndex() === i ? 'bg-gray-900 w-4' : 'bg-gray-300 hover:bg-gray-400'"
                  [attr.aria-label]="'Go to insight ' + (i + 1)"
                  [attr.aria-current]="currentInsightIndex() === i ? 'true' : 'false'">
                </button>
              }
            </div>
          }
        </div>
      } @else {
        <div class="text-sm text-gray-400 text-center py-8">
          No insights available at this time.
        </div>
      }
    </div>
  </div>

  <!-- Section 3: Upcoming Events (Bottom Right) -->
  <div class="w-full flex-shrink-0 pb-4 border-b border-gray-50 flex justify-end">
    <div class="w-full lg:w-1/2 flex flex-col gap-2 min-h-0 overflow-hidden" style="height: 100%;">
      <div class="flex-shrink-0">
        <div class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-2">Upcoming Payouts</div>
      </div>
      <div class="flex-1 min-h-0 flex flex-col overflow-hidden" style="position: relative;">
        <app-passive-income-calendar [portfolio]="portfolio()" />
      </div>
    </div>
  </div>


</div>
