<main class="flex flex-col lg:flex-row overflow-hidden" style="height: 100vh; max-height: 100vh;">
  <!-- Left Pane (50% width on large screens, full width on mobile) -->
  <div class="w-full lg:w-1/2 flex flex-col lg:h-full overflow-hidden min-h-0">
    <!-- Navigation -->
    <div class="flex items-baseline gap-x-3 sm:gap-x-4 p-4 sm:p-6 pb-2 flex-wrap flex-shrink-0">
      <a routerLink="/wealth" class="text-xl sm:text-2xl font-medium text-gray-400 hover:text-gray-600 transition-colors">
        Wealth
      </a>
      <h1 class="text-2xl sm:text-3xl font-bold tracking-tight text-gray-900">
        Transactions
      </h1>
    </div>

    <!-- Dashboard Section -->
    <div class="flex-1 overflow-hidden min-h-0">
      @if (isLoading()) {
        <div class="p-4 sm:p-6">
          <div class="space-y-4">
            <div class="h-4 bg-gray-200 rounded w-40 mb-2 animate-pulse"></div>
            <div class="h-12 bg-gray-200 rounded w-64 animate-pulse"></div>
          </div>
        </div>
      } @else {
        <app-transactions-dashboard 
          [transactions]="transactions()"
          [totalInvested]="totalInvested()" />
      }
    </div>
  </div>

  <!-- Right Pane (50% width on large screens, full width on mobile) - Transactions List or Recurring Investments -->
  <div class="w-full lg:w-1/2 flex flex-col overflow-hidden min-h-0 border-l border-gray-200">
    <!-- Content Area -->
    <div class="flex-1 overflow-hidden min-h-0 flex flex-col">
      @if (activeView() === 'transactions') {
        <!-- Historical Transactions View -->
        @if (isLoading() && !isAddingTransaction()) {
          <app-transaction-skeleton></app-transaction-skeleton>
        } @else if (error() && transactions().length === 0) {
          <app-error-state
            [title]="'Unable to load transactions'"
            [message]="error() || 'We couldn\'t connect to Alfred. Please check your connection.'"
            (retry)="transactionService.reload()">
          </app-error-state>
        } @else {
          <app-transaction-list 
            [transactions]="transactions()" 
            [isAdding]="isAddingTransaction()"
            [isLoading]="isLoading()"
            [error]="error()"
            (save)="saveTransaction($event)"
            (cancel)="cancelNewTransaction()"
            (update)="updateTransaction($event)"
            (delete)="deleteTransaction($event)"
            (toggleAdd)="toggleAddTransaction()"
            (navigateToRecurring)="navigateToRecurring()">
          </app-transaction-list>
        }
      } @else {
        <!-- Recurring Investments List -->
        <app-recurring-investments-list
          (navigateToTransactions)="navigateToTransactions()">
        </app-recurring-investments-list>
      }
    </div>
  </div>
</main>
