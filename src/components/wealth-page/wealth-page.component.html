<div class="min-h-screen bg-gray-50 p-2 sm:p-4 lg:p-6">
  <main class="flex flex-col lg:flex-row overflow-hidden bg-white rounded-xl shadow-sm border border-gray-200/50 max-w-[1800px] mx-auto h-[calc(100vh-1rem)] sm:h-[calc(100vh-2rem)] lg:h-[calc(100vh-3rem)]">
    <!-- Left Pane (70% width on large screens, full width on mobile) -->
    <div class="w-full lg:w-[70%] flex flex-col lg:h-full overflow-hidden min-h-0">
    <!-- Navigation -->
    <div class="flex items-baseline gap-x-3 sm:gap-x-4 p-4 sm:p-6 pb-2 flex-wrap flex-shrink-0">
      <h1 class="text-2xl sm:text-3xl font-bold tracking-tight text-gray-900">
        Wealth
      </h1>
      <a routerLink="/transactions" class="text-xl sm:text-2xl font-medium text-gray-400 hover:text-gray-600 transition-colors">
        Transactions
      </a>
    </div>

    <!-- Portfolio Dashboard -->
    <div class="flex-1 overflow-y-auto min-h-0">
      @if (isLoading()) {
        <div class="p-4 sm:p-6">
          <div class="space-y-4">
            <div class="h-4 bg-gray-200 rounded w-40 mb-2 animate-pulse"></div>
            <div class="h-12 bg-gray-200 rounded w-64 animate-pulse"></div>
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 mt-6">
              <div class="h-16 bg-gray-200 rounded animate-pulse"></div>
              <div class="h-16 bg-gray-200 rounded animate-pulse"></div>
              <div class="h-16 bg-gray-200 rounded animate-pulse"></div>
            </div>
          </div>
        </div>
      } @else {
        <app-portfolio-dashboard 
          [portfolio]="portfolio()" 
          [transactions]="transactions()">
        </app-portfolio-dashboard>
      }
    </div>
  </div>

  <!-- Right Pane (45% width on large screens, full width on mobile) -->
  <div class="w-full lg:w-[30%] flex flex-col" style="height: 100%; overflow: hidden;">
    
    <div class="flex items-center justify-between px-3 pt-4 sm:pt-6 mb-3 flex-shrink-0 gap-4">
      
      <div class="flex items-baseline gap-x-3 sm:gap-x-4">
        <!-- Positions -->
        @if (activeView() === 'positions') {
          <h2 class="text-sm font-bold tracking-tight text-gray-900">Positions</h2>
        } @else {
          <button
            (click)="setActiveView('positions')"
            class="text-sm font-medium text-gray-400 hover:text-gray-600 transition-colors">
            Positions
          </button>
        }

        <!-- Strategy -->
        @if (activeView() === 'strategy') {
          <h2 class="text-sm font-bold tracking-tight text-gray-900">Strategy</h2>
        } @else {
          <button
            (click)="setActiveView('strategy')"
            class="text-sm font-medium text-gray-400 hover:text-gray-600 transition-colors">
            Strategy
          </button>
        }
      </div>

      <!-- User Profile -->
      <app-user-profile></app-user-profile>
    </div>

    <!-- Content Area -->
    <div class="flex-1 overflow-hidden min-h-0 px-3 pb-4 sm:pb-6 flex flex-col">
      @if (activeView() === 'positions') {
        @if (isLoading()) {
          <app-portfolio-skeleton></app-portfolio-skeleton>
        } @else if (error() && portfolio().length === 0) {
          <app-error-state
            [title]="'Unable to load portfolio'"
            [message]="error() || 'We couldn\'t connect to Alfred. Please check your connection.'"
            (retry)="portfolioService.reload()">
          </app-error-state>
        } @else {
          <app-portfolio-list 
            [portfolio]="portfolio()"
            [cashBalance]="portfolioService.cashAmount()"
            [totalValue]="totalValue()"
            (update)="updateTransaction($event)"
            (delete)="deleteTransaction($event)"
            (assetClick)="onAssetClick($event)">
          </app-portfolio-list>
        }
      } @else if (activeView() === 'strategy') {
        <app-strategy-panel [portfolio]="portfolio()"></app-strategy-panel>
      }
    </div>
  </div>
  </main>
</div>

